{% extends 'base.html.twig' %}

{% block title %}Inventory
{% endblock %}

{% block content %}

	<div class="conatiner-fluid content-inner mt-n5 py-0">
		<div class="row">
			<div class="col-md-12 col-lg-12">
				<div class="row row-cols-1"></div>
			</div>
			<div class="col-md-12 col-lg-12">
				<div class="row">
					<div class="col-md-12 col-lg-12">
						<div class="overflow-hidden card" data-aos="fade-up" data-aos-delay="200">
							<div class="flex-wrap card-header d-flex justify-content-between">
								<div class="col-md-3 col-lg-3">
									<div class="row header-title">
										<h4 class="mb-2 card-title">Your Inventory</h4>
									</div>
									<div class="row">
										<div class="dropdown">
											<a href="#" class="text-gray dropdown-toggle" id="dropdownMenuButton22" data-bs-toggle="dropdown" aria-expanded="false">
												Bulk Actions
											</a>
											<ul id="inventoryBulkActions" class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownMenuButton22">
												<li data-bs-toggle="modal" class="edit dropdown-item">Quick Edit</li>
												<li class="export dropdown-item">Export</li>
												<li class="delete dropdown-item">Delete</li>
											</ul>
										</div>
									</div>
									<hr>
								</div>
								<div class="col-md-9 col-lg-9 col-sm-12">
									<div class="d-flex justify-content-end">
										<button type="button" class="btn btn-soft-primary" data-bs-toggle="modal" data-bs-target="#addToInventoryModal" style="margin: 8px;">
											<svg class="icon-32" width="32" viewbox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
												<path fill-rule="evenodd" clip-rule="evenodd" d="M7.33 2H16.66C20.06 2 22 3.92 22 7.33V16.67C22 20.06 20.07 22 16.67 22H7.33C3.92 22 2 20.06 2 16.67V7.33C2 3.92 3.92 2 7.33 2ZM12.82 12.83H15.66C16.12 12.82 16.49 12.45 16.49 11.99C16.49 11.53 16.12 11.16 15.66 11.16H12.82V8.34C12.82 7.88 12.45 7.51 11.99 7.51C11.53 7.51 11.16 7.88 11.16 8.34V11.16H8.33C8.11 11.16 7.9 11.25 7.74 11.4C7.59 11.56 7.5 11.769 7.5 11.99C7.5 12.45 7.87 12.82 8.33 12.83H11.16V15.66C11.16 16.12 11.53 16.49 11.99 16.49C12.45 16.49 12.82 16.12 12.82 15.66V12.83Z" fill="currentColor"></path>
											</svg>
											Add Event</button>
										<button type="button" class="btn btn-soft-info" style="margin: 8px;">
											<svg class="icon-32" width="32" viewbox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
												<path d="M7.38948 8.98403H6.45648C4.42148 8.98403 2.77148 10.634 2.77148 12.669V17.544C2.77148 19.578 4.42148 21.228 6.45648 21.228H17.5865C19.6215 21.228 21.2715 19.578 21.2715 17.544V12.659C21.2715 10.63 19.6265 8.98403 17.5975 8.98403L16.6545 8.98403" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
												<path d="M12.0215 2.19044V14.2314" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
												<path d="M9.10645 5.1189L12.0214 2.1909L14.9374 5.1189" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
											</svg>
											Export</button>
									</div>
								</div>
							</div>
							<div class="p-20 card-body">
								<div class="mt-4 table-responsive">
									<table id="inventoryTable" class="table table-striped mb-0" role="grid" data-multiple-select-row="true" data-click-to-select="true" data-toggle="table" data-pagination="true" data-page-size="10" data-page-list="[5, 10, 25]" data-url="/api/user/inventory" data-side-pagination="server" data-loading-template="loadingTemplate" data-detail-view="true" data-detail-formatter="inventoryDetailFormatter">
										<thead>
											<tr>
												<th data-field="state" data-checkbox="true"></th>
												<th data-field="eventData"></th>
												<th data-field="name" data-sortable="true">Name</th>
												<th data-field="date" data-sortable="true">Event Date</th>
												<th data-field="tickets" data-sortable="true">
													<i data-toggle="tooltip" data-placement="top" data-container="body" title="Total/Remaining" class="fa-solid fa-circle-info"></i>
													Quantity</th>
												<th data-field="section" data-sortable="true">Section</th>
												<th data-field="floorPrice">
													<i data-toggle="tooltip" data-placement="top" data-container="body" title="Section's lowest price on Viagogo" class="fa-solid fa-circle-info"></i>
													Floor Price</th>
												<th data-field="yourPrice" data-sortable="true">
													<i data-toggle="tooltip" data-placement="top" data-container="body" title="Your price per ticket" class="fa-solid fa-circle-info"></i>
													Your Price</th>
												<th data-field="roi" data-sortable="true">ROI</th>
												<th data-field="status" data-sortable="true">Status</th>
												<th data-field="actions">Actions</th>
											</tr>
										</thead>
									</table>
									<hr>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="modal fade modal-xl" id="addToInventoryModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="staticBackdropLabel">Add To Inventory</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body">
						<div class="col-md-12 col-lg-12">
							<div class="row">
								<div class="col-md-12 col-lg-12">
									<div class="overflow-hidden card" data-aos="fade-up" data-aos-delay="200">
										<div class="flex-wrap card-header d-flex justify-content-between">
											<div class="col-md-12 col-lg-12">
												<div class="header-title">
													<p class="mb-0">
														<svg class="me-2 text-primary icon-24" width="24" viewbox="0 0 24 24">
															<path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/>
														</svg>
														Manually add a purchase you haven't listed on Viagogo yet.
													</p>
													<p class="mb-0">
														<svg class="me-2 text-primary icon-24" width="24" viewbox="0 0 24 24">
															<path fill-rule="evenodd" clip-rule="evenodd" d="M14.4773 4.44209L21.746 17.0572C21.906 17.4338 21.976 17.7399 21.996 18.058C22.036 18.8012 21.776 19.5236 21.2661 20.0795C20.7562 20.6334 20.0663 20.9604 19.3164 21H4.6789C4.36896 20.9812 4.05901 20.9108 3.76906 20.8018C2.3193 20.2172 1.61942 18.5723 2.20932 17.1464L9.52809 4.43317C9.77804 3.98628 10.158 3.60082 10.6279 3.35309C11.9877 2.59902 13.7174 3.09447 14.4773 4.44209ZM12.8675 12.7557C12.8675 13.2314 12.4776 13.6287 11.9977 13.6287C11.5178 13.6287 11.1178 13.2314 11.1178 12.7557V9.95248C11.1178 9.47585 11.5178 9.09039 11.9977 9.09039C12.4776 9.09039 12.8675 9.47585 12.8675 9.95248V12.7557ZM11.9977 17.0176C11.5178 17.0176 11.1178 16.6202 11.1178 16.1456C11.1178 15.669 11.5178 15.2726 11.9977 15.2726C12.4776 15.2726 12.8675 15.6601 12.8675 16.1347C12.8675 16.6202 12.4776 17.0176 11.9977 17.0176Z" fill="currentColor"></path>
														</svg>
														Already have a listing on Viagogo for this purchase? Hit the
														<b>Sync</b>
														button to show it on your inventory!
													</p>
												</div>
											</div>
										</div>
										<div class="card-body">
											<div class="card-body">
												{{ form_start(addToInventoryForm, {'attr': {'id': 'form-wizard1',}}) }}
												<ul id="top-tab-list" class="p-0 row list-inline">
													<li class="mb-2 col-lg-3 col-md-6 text-start active" id="account">
														<a href="javascript:void();">
															<div class="iq-icon me-3">
																<svg class="svg-icon icon-20" xmlns="http://www.w3.org/2000/svg" width="20" fill="none" viewbox="0 0 24 24" stroke="currentColor">
																	<path d="M3.09277 9.40421H20.9167" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
																	<path d="M16.442 13.3097H16.4512" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
																	<path d="M12.0045 13.3097H12.0137" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
																	<path d="M7.55818 13.3097H7.56744" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
																	<path d="M16.442 17.1962H16.4512" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
																	<path d="M12.0045 17.1962H12.0137" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
																	<path d="M7.55818 17.1962H7.56744" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
																	<path d="M16.0433 2V5.29078" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
																	<path d="M7.96515 2V5.29078" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
																	<path fill-rule="evenodd" clip-rule="evenodd" d="M16.2383 3.5791H7.77096C4.83427 3.5791 3 5.21504 3 8.22213V17.2718C3 20.3261 4.83427 21.9999 7.77096 21.9999H16.229C19.175 21.9999 21 20.3545 21 17.3474V8.22213C21.0092 5.21504 19.1842 3.5791 16.2383 3.5791Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
																</svg>
															</div>
															<span class="dark-wizard">Event</span>
														</a>
													</li>
													<li id="personal" class="mb-2 col-lg-3 col-md-6 text-start">
														<a href="javascript:void();">
															<div class="iq-icon me-3">
																<svg class="svg-icon icon-20" xmlns="http://www.w3.org/2000/svg" width="20" fill="none" viewbox="0 0 24 24" stroke="currentColor">
																	<path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 10.5005C14.5 9.11924 13.3808 8 12.0005 8C10.6192 8 9.5 9.11924 9.5 10.5005C9.5 11.8808 10.6192 13 12.0005 13C13.3808 13 14.5 11.8808 14.5 10.5005Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
																	<path fill-rule="evenodd" clip-rule="evenodd" d="M11.9995 21C10.801 21 4.5 15.8984 4.5 10.5633C4.5 6.38664 7.8571 3 11.9995 3C16.1419 3 19.5 6.38664 19.5 10.5633C19.5 15.8984 13.198 21 11.9995 21Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
																</svg>
															</div>
															<span class="dark-wizard">Venue</span>
														</a>
													</li>
													<li id="payment" class="mb-2 col-lg-3 col-md-6 text-start">
														<a href="javascript:void();">
															<div class="iq-icon me-3">
																<svg class="svg-icon icon-20" xmlns="http://www.w3.org/2000/svg" width="20" fill="none" viewbox="0 0 24 24" stroke="currentColor">
																	<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
																</svg>
															</div>
															<span class="dark-wizard">Billing</span>
														</a>
													</li>
													<li id="confirm" class="mb-2 col-lg-3 col-md-6 text-start">
														<a href="javascript:void();">
															<div class="iq-icon me-3">
																<svg class="svg-icon icon-20" xmlns="http://www.w3.org/2000/svg" width="20" fill="none" viewbox="0 0 24 24" stroke="currentColor">
																	<path d="M13.8496 4.25024V6.67024" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
																	<path d="M13.8496 17.76V19.784" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
																	<path d="M13.8496 14.3247V9.50366" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
																	<path fill-rule="evenodd" clip-rule="evenodd" d="M18.7021 20C20.5242 20 22 18.5426 22 16.7431V14.1506C20.7943 14.1506 19.8233 13.1917 19.8233 12.001C19.8233 10.8104 20.7943 9.85039 22 9.85039L21.999 7.25686C21.999 5.45745 20.5221 4 18.7011 4H5.29892C3.47789 4 2.00104 5.45745 2.00104 7.25686L2 9.93485C3.20567 9.93485 4.17668 10.8104 4.17668 12.001C4.17668 13.1917 3.20567 14.1506 2 14.1506V16.7431C2 18.5426 3.4758 20 5.29787 20H18.7021Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
																</svg>
															</div>
															<span class="dark-wizard">Tickets</span>
														</a>
													</li>
												</ul>
												<fieldset>
													<div class="form-card text-start">
														<div class="row">
															<div class="col-7">
																<h5 class="mb-4">Event Details:</h3>
															</div>
															<div class="col-5">
																<h5 class="steps">Step 1 - 4</h2>
															</div>
														</div>

														<!-- Render Event Details Fields -->
														<div class="row">
															<div class="col-md-6">
																{{ form_row(addToInventoryForm.eventName, {'id' : 'eventName'}) }}
															</div>
															<div class="col-md-6">
																{{ form_row(addToInventoryForm.country, {'id' : 'country'}) }}
															</div>
															<div class="col-md-6">
																{{ form_row(addToInventoryForm.eventDate, {'id' : 'eventDate'}) }}
															</div>
															<div class="col-md-6">
																{{ form_row(addToInventoryForm.ticketGenre, {'id' : 'ticketGenre'}) }}
															</div>
														</div>
														<!-- ... Other fields for Event Details -->
													</div>
													<!-- ... Buttons and other HTML as needed -->
													{{ form_row(addToInventoryForm.eventId, {'id' : 'eventId'}) }}
													{{ form_row(addToInventoryForm.categoryId, {'id' : 'categoryId'}) }}
													<button id="lookupEvent" disabled type="button" class="btn btn-primary action-button float-end" value="Next">Next</button>
												</fieldset>

												<fieldset>
													<div class="form-card text-start">
														<div class="row">
															<div class="col-7">
																<h5 class="mb-4">Venue:</h3>
															</div>
															<div class="col-5">
																<h5 class="steps">Step 2 - 4</h2>
															</div>
														</div>
														<!-- Render Venue Fields -->
														<div class="row">
															<div class="col-md-6">
																{{ form_row(addToInventoryForm.city, {'id' : 'city'}) }}
															</div>
															<div class="col-md-6">
																{{ form_row(addToInventoryForm.location, {'id' : 'location'}) }}
															</div>
														</div>
														<!-- ... Other fields for Venue -->
													</div>
													<!-- ... Buttons and other HTML as needed -->
													<button type="button" name="next" class="btn btn-primary next action-button float-end" value="Next">Next</button>
													<button type="button" name="previous" class="btn btn-light previous action-button-previous float-end me-1" value="Previous">Previous</button>
												</fieldset>

												<fieldset>
													<div class="form-card text-start">
														<div class="row">
															<div class="col-7">
																<h5 class="mb-4">Billing Information:</h3>
															</div>
															<div class="col-5">
																<h5 class="steps">Step 3 - 4</h2>
															</div>
														</div>
														<!-- Render Billing Fields -->
														<div class="row">
															<div class="col-md-6">
																{{ form_row(addToInventoryForm.orderEmail) }}
															</div>
															<div class="col-md-6">
																{{ form_row(addToInventoryForm.orderNumber) }}
															</div>
															<div class="col-md-6">
																{{ form_row(addToInventoryForm.purchaseDate) }}
															</div>
														</div>
													</div>
													<!-- ... Buttons and other HTML as needed -->
													<button type="button" name="next" class="btn btn-primary next action-button float-end" value="Next">Next</button>
												</fieldset>

												<fieldset>
													<div class="form-card text-start">
														<div class="row">
															<div class="col-7">
																<h3 class="mb-4 text-left">Ticket(s) Details</h3>
															</div>
															<div class="col-5">
																<h4 class="steps">Step 4 - 4</h2>
															</div>
														</div>
														<!-- Render Ticket Details Fields -->
														<div class="row">
															<div class="col-md-6">
																{{ form_row(addToInventoryForm.ticketCost) }}
															</div>
															<div class="col-md-6">
																{{ form_row(addToInventoryForm.quantity, {'attr': {'disabled': 'disabled'}}) }}
																{{ form_row(addToInventoryForm.quantityRemain) }}
															</div>
															<div class="col-md-6">
																{{ form_row(addToInventoryForm.retailer) }}
															</div>
															<div class="col-md-6">
																{{ form_row(addToInventoryForm.section, {'id' : 'sectionSelect'}) }}
																{{ form_row(addToInventoryForm.customSection, {'id' : 'customSection'}) }}
															</div>
															<div class="col-md-6">
																{{ form_row(addToInventoryForm.row) }}
															</div>
															<div class="col-md-6">
																{{ form_row(addToInventoryForm.seatFrom) }}
																{{ form_row(addToInventoryForm.seatTo) }}
															</div>
															<div class="col-md-6">
																{{ form_row(addToInventoryForm.ticketType) }}
															</div>
														</div>
													</div>
													<hr>
													<div id="addingToInventoryContainer" style="display: none;">
														<div id="addingToInventorySpinner" class="spinner-border text-primary" role="status">
															<span class="visually-hidden">Loading...</span>
														</div>
														<div class="row justify-content-center">
															<div class="text-center col-7">
																<h5 class="text-center purple-text text-primary" id="addToInventoryStatus">Adding To Inventory...</h5>
															</div>
														</div>
													</div>
													<hr>
													<div class="row justify-content-center">
														{{ form_label(addToInventoryForm.submit) }}
														{{ form_widget(addToInventoryForm.submit, {'id':'addToInventory'}) }}
														<button type="button" name="previous" class="btn btn-light previous action-button-previous float-end me-1" value="Previous">Previous</button>
													</div>
													<hr>
													<div class="row justify-content-end">
														<button type="button" data-bs-dismiss="modal" class="btn btn-soft-secondary float-end me-1" value="Close" style="margin: 8px">Close</button>
													</div>
												</fieldset>

												{{ form_end(addToInventoryForm) }}

											</div>
											<div class="card-footer">
												<small style="display: none;" class="text-danger" id="requestErrorMsg"></small>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>


		<div class="modal fade" id="confirmDeleteModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="confirmDeleteModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="confirmDeleteModalLabel">Confirm Delete</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body">
						<p>Are you sure you want to delete this item?</p>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-soft-secondary" data-bs-dismiss="modal">Cancel</button>
						<button type="button" class="btn btn-soft-danger" data-bs-dismiss="modal" id="confirmDeleteButton">Delete</button>
					</div>
				</div>
			</div>
		</div>

		<div class="modal fade" id="bulkUpdateModal" tabindex="-1" aria-labelledby="bulkUpdateModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="bulkUpdateModalLabel">Update Items</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					{{ form_start(updateInventoryForm, {'attr': {'class': 'mt-3 text-center'}}) }}
					<div class="modal-body">
						<div class="row">
							<div class="col-md-6">
								{{ form_row(updateInventoryForm.ticketType) }}
							</div>
							<div class="col-md-6">
								{{ form_row(updateInventoryForm.retailer) }}
							</div>
							<div class="col-md-12">
								{{ form_row(updateInventoryForm.individualTicketCost) }}
								{{ form_row(updateInventoryForm.orderEmail) }}
								{{ form_row(updateInventoryForm.purchaseDate) }}
							</div>
						</div>


					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-soft-secondary" data-bs-dismiss="modal">Cancel</button>
						{{ form_label(updateInventoryForm.submit) }}
						{{ form_widget(updateInventoryForm.submit, {'id':'bulkUpdateBtn'}) }}
					</div>
					{{ form_end(updateInventoryForm) }}
				</div>
			</div>
		</div>

	{% endblock %}
